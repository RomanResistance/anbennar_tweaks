###########################################################
# Events for the Castonath Patricians Estate
#
# not written by Tus3
###########################################################

namespace = castonath_patricians_events

# Events if monstrous and holding Castonath: 1 - 99
# Events for non-monstrous: 100 - 199
# 831, 832, 833 are the Castonath province ids

# Monstrous events #
# Organizer
country_event = {
	id = castonath_patricians_events.0
	title = castonath_patricians_events.0.t
	desc = castonath_patricians_events.0.desc
	picture = BIG_BOOK_eventPicture

	hidden = yes

	trigger = {
		has_country_modifier = monstrous_nation
		OR = {
			831 = {
				is_core = ROOT
				owned_by = ROOT
				OR = {
					has_province_modifier = castonath_patrician_influence_full
					has_province_modifier = castonath_patrician_influence_significant
					has_province_modifier = castonath_patrician_influence_considerable
					has_province_modifier = castonath_patrician_influence_some
				}
			}
			832 = {
				is_core = ROOT
				owned_by = ROOT
				OR = {
					has_province_modifier = castonath_patrician_influence_full
					has_province_modifier = castonath_patrician_influence_significant
					has_province_modifier = castonath_patrician_influence_considerable
					has_province_modifier = castonath_patrician_influence_some
				}
			}
			833 = {
				is_core = ROOT
				owned_by = ROOT
				OR = {
					has_province_modifier = castonath_patrician_influence_full
					has_province_modifier = castonath_patrician_influence_significant
					has_province_modifier = castonath_patrician_influence_considerable
					has_province_modifier = castonath_patrician_influence_some
				}
			}
		}
	}

	immediate = {
		hidden_effect = {
			random_list = {
				1 = {
					trigger = { 
						831 = {
							is_core = ROOT
							owned_by = ROOT
							OR = {
								has_province_modifier = castonath_patrician_influence_full
								has_province_modifier = castonath_patrician_influence_significant
								has_province_modifier = castonath_patrician_influence_considerable
								has_province_modifier = castonath_patrician_influence_some
							}
						}
					}
					831 = {
						save_event_target_as = castonath_province_event_target
					}
				}
				1 = {
					trigger = { 
						832 = {
							is_core = ROOT
							owned_by = ROOT
							OR = {
								has_province_modifier = castonath_patrician_influence_full
								has_province_modifier = castonath_patrician_influence_significant
								has_province_modifier = castonath_patrician_influence_considerable
								has_province_modifier = castonath_patrician_influence_some
							}
						}
					}
					832 = {
						save_event_target_as = castonath_province_event_target
					}
				}
				1 = {
					trigger = { 
						owns_core_province = 833
						833 = {
							is_core = ROOT
							owned_by = ROOT
							OR = {
								has_province_modifier = castonath_patrician_influence_full
								has_province_modifier = castonath_patrician_influence_significant
								has_province_modifier = castonath_patrician_influence_considerable
								has_province_modifier = castonath_patrician_influence_some
							}
						}
					}
					833 = {
						save_event_target_as = castonath_province_event_target
					}
				}
			}	
		}
	}

	mean_time_to_happen = {
		years = 2
	}

	option = {
		name = castonath_patricians_events.0.t
		ai_chance = {
			factor = 100
		}

		random_list = {
			# Eating flesh
			1 = { country_event = { id = castonath_patricians_events.1 } }
			# Patrician rebels a few blocks
			1 = { country_event = { id = castonath_patricians_events.2 } }
			# Patrician hidey holes
			1 = { country_event = { id = castonath_patricians_events.3 } }
			# Patricians smuggling stuff out of the city
			1 = { country_event = { id = castonath_patricians_events.4 } }
			# Patricians agitating revolts
			1 = { country_event = { id = castonath_patricians_events.5 } }
			# Patricians blow up infastructure
			1 = { country_event = { id = castonath_patricians_events.6 } }
			# Patricians bribing your officials
			1 = { country_event = { id = castonath_patricians_events.7 } }
			# Patricians assassinate your heir
			1 = { country_event = { id = castonath_patricians_events.8 } }
			# Patrician defects
			1 = { country_event = { id = castonath_patricians_events.9 } }
			# Chieftain seeks his vengeance
			1 = { country_event = { id = castonath_patricians_events.10 } }
		}
	}
}

# Patricians caught eating monstrous flesh
country_event = {
	id = castonath_patricians_events.1
	title = castonath_patricians_events.1.t
	desc = castonath_patricians_events.1.desc
	picture = WITCHBURNING_eventPicture

	is_triggered_only = yes

	# Who are the real monsters here? Wipe them out
	option = {
		name = castonath_patricians_events.1.a
		event_target:castonath_province_event_target = {
			castonath_patricians_decrease_influence_effect = yes
			add_devastation = 50
		}
	}
	# The cost is too great
	option = {
		name = castonath_patricians_events.1.b
		reduce_stability_or_adm_power = yes
	}
}

# Patrician have asserted control over a few blocks of the city
country_event = {
	id = castonath_patricians_events.2
	title = castonath_patricians_events.2.t
	desc = castonath_patricians_events.2.desc
	picture = FREE_CITY_eventPicture

	is_triggered_only = yes

	# Set fire to the block
	option = {
		name = castonath_patricians_events.2.a
		event_target:castonath_province_event_target = {
			castonath_patricians_decrease_influence_effect = yes
			random_list = {
				1 = {
					add_base_tax = -1
				}
				1 = {
					add_base_production = -1
				}
				1 = {
					add_base_manpower = -1
				}
			}
		}
	}
	# Drive them out inch by inch
	option = {
		name = castonath_patricians_events.2.b
		event_target:castonath_province_event_target = {
			castonath_patricians_decrease_influence_effect = yes
			spawn_rebels = {
				size = 2
				type = castonath_patrician_rebel
				win = yes
				culture = castanorian
				leader = "Patrician General"
			}
		}

	}
	# Do nothing
	option = {
		name = castonath_patricians_events.2.c
		event_target:castonath_province_event_target = {
			add_local_autonomy = 33
		}
	}
}

# Patrician hidey hole discovered
country_event = {
	id = castonath_patricians_events.3
	title = castonath_patricians_events.3.t
	desc = castonath_patricians_events.3.desc
	picture = indiangfx_CITY_VIEW_eventPicture

	is_triggered_only = yes

	# Flush them out & take their things
	option = {
		name = castonath_patricians_events.3.a
		event_target:castonath_province_event_target = {
			castonath_patricians_decrease_influence_effect = yes
			add_devastation = 10
		}
		random_list = {
			1 = {
				event_target:castonath_province_event_target = {
					add_base_tax = -1
				}
			}
			1 = {
				event_target:castonath_province_event_target = {
					add_base_production = -1
				}
			}
			1 = {
				event_target:castonath_province_event_target = {
					add_base_manpower = -1
				}
			}
		}
		add_years_of_income = 0.3
		increase_monstrous_1 = yes
	}
	# No need to do anything about it yet
	option = {
		name = castonath_patricians_events.3.b
		add_prestige = -10
		event_target:castonath_province_event_target = {
			add_province_modifier = {
				name = castonath_patrician_hidey_hole
				duration = 1825
			}
		}
	}
}

# Patricians caught smuggling stuff out of the city
country_event = {
	id = castonath_patricians_events.4
	title = castonath_patricians_events.4.t
	desc = castonath_patricians_events.4.desc
	picture = SPY_eventPicture

	is_triggered_only = yes

	# Use as excuse to crack down on all patricians
	option = {
		name = castonath_patricians_events.4.a
		event_target:castonath_province_event_target = {
			castonath_patricians_decrease_influence_effect = yes
			add_devastation = 10
		}
		increase_monstrous_5 = yes
	}
	# Confiscate the goods from the smuggler
	option = {
		name = castonath_patricians_events.4.b
		add_years_of_income = 0.3
	}
	# Be the bigger man? orc? let them leave
	option = {
		name = castonath_patricians_events.4.c
		decrease_monstrous_3 = yes
		add_years_of_income = -0.3
		event_target:castonath_province_event_target = {
			add_unrest = -3
		}
	}
}

# Patricians agitating revolts
country_event = {
	id = castonath_patricians_events.5
	title = castonath_patricians_events.5.t
	desc = castonath_patricians_events.5.desc
	picture = STREET_SPEECH_eventPicture

	is_triggered_only = yes

	# Use as excuse to crack down on all patricians
	option = {
		name = castonath_patricians_events.5.a
		event_target:castonath_province_event_target = {
			castonath_patricians_decrease_influence_effect = yes
			spawn_rebels = {
				type = castonath_patrician_rebel
				culture = castanorian
				leader = "Patrician General"
				size = 2
			}
		}
		increase_monstrous_2 = yes
	}
	# Deal with just the rebels
	option = {
		name = castonath_patricians_events.5.b
		event_target:castonath_province_event_target = {
			spawn_rebels = {
				type = castonath_patrician_rebel
				culture = castanorian
				leader = "Patrician General"
				size = 1
			}
		}
	}
	# Concessions
	option = {
		name = castonath_patricians_events.5.c
		add_prestige = -10
	}
}

# Patrician plan to blow up infastructure
country_event = {
	id = castonath_patricians_events.6
	title = castonath_patricians_events.6.t
	desc = castonath_patricians_events.6.desc
	picture = SIEGE_eventPicture

	is_triggered_only = yes

	# Let them do it and then use as pretense to crack down on them
	option = {
		name = castonath_patricians_events.6.a
		event_target:castonath_province_event_target = {
			castonath_patricians_decrease_influence_effect = yes
			add_devastation = 20
			random_list = {
				1 = {
					add_base_tax = -1
				}
				1 = {
					add_base_production = -1
				}
				1 = {
					add_base_manpower = -1
				}
			}
		}
	}
	# Try them in a court of law
	option = {
		name = castonath_patricians_events.6.b
		decrease_monstrous_2 = yes
		add_adm_power = -15
	}
}

# Patricians caught bribing your officials
country_event = {
	id = castonath_patricians_events.7
	title = castonath_patricians_events.7.t
	desc = castonath_patricians_events.7.desc
	picture = MERCHANTS_TALKING_eventPicture

	is_triggered_only = yes

	# Purge them all - patricians and officials both
	option = {
		name = castonath_patricians_events.7.a
		event_target:castonath_province_event_target = {
			castonath_patricians_decrease_influence_effect = yes
			add_province_modifier = {
				name = castonath_curtailed_officials
				duration = 1825
			}
		}
	}
	# Let me in on some of those bribes?
	option = {
		name = castonath_patricians_events.7.b
		add_years_of_income = 0.5
		add_corruption = 1.5
	}
}

# Patricians assassinate your heir
country_event = {
	id = castonath_patricians_events.8
	title = castonath_patricians_events.8.t
	desc = castonath_patricians_events.8.desc
	picture = DEATH_OF_HEIR_eventPicture

	is_triggered_only = yes

	trigger = {
		has_heir = yes
	}

	# They will all pay.
	option = {
		name = castonath_patricians_events.8.a
		event_target:castonath_province_event_target = {
			castonath_patricians_decrease_influence_effect = yes
			add_devastation = 20
		}
		kill_heir = yes
	}
	# It was her/his own fault
	option = {
		name = castonath_patricians_events.8.b
		kill_heir = yes
		add_prestige = -5
	}
}

# A patrician offers to defect in exchange for clemency for his family
country_event = {
	id = castonath_patricians_events.9
	title = castonath_patricians_events.9.t
	desc = castonath_patricians_events.9.desc
	picture = DIPLOMAT_INTERROGATION_eventPicture

	is_triggered_only = yes

	# Use him against the rest of them/torture/blackmail
	option = {
		name = castonath_patricians_events.9.a
		event_target:castonath_province_event_target = {
			castonath_patricians_decrease_influence_effect = yes
		}
		increase_monstrous_2 = yes
	}
	# Hire him as an advisor
	option = {
		name = castonath_patricians_events.9.b
		define_advisor = {
			type = spymaster
			skill = 2
			cost_multiplier = 0.33
			culture = castanorian
			religion = regent_court
		}
	}
	# We don't need your help
	option = {
		name = castonath_patricians_events.9.c
		add_legitimacy = 10
		add_prestige = 10
	}
}

# Path of vengeance for a chieftain
country_event = {
	id = castonath_patricians_events.10
	title = castonath_patricians_events.10.t
	desc = castonath_patricians_events.10.desc
	picture = VILLAGE_BURNING_eventPicture

	is_triggered_only = yes

	trigger = {
		# So this one doesn't fire too often/in quick succession
		if = {
			limit = { has_country_flag = vengeance_chieftain_event_fired }
			had_country_flag = {
				flag = vengeance_chieftain_event_fired
				days = 1825
			}
		}
		else = {
			always = yes
		}
	}

	immediate = {
		set_saved_name = {
			key = patrician_vengeance_chieftain_name
			type = advisor
			scope = ROOT
		}
		set_country_flag = vengeance_chieftain_event_fired
	}

	# Let him carve a bloody path through them
	option = {
		name = castonath_patricians_events.10.a
		event_target:castonath_province_event_target = {
			castonath_patricians_decrease_influence_effect = yes
			add_devastation = 10
		}
		random = {
			chance = 25
			define_general = {
				name = patrician_vengeance_chieftain_name
				shock = 6
				fire = 2
				manuever = 4
				siege = 1
				trait = ruthless_personality
			}
		}
	}
	# We can redirect his energies elsewhere
	option = {
		name = castonath_patricians_events.10.b
		define_general = {
			name = patrician_vengeance_chieftain_name
			shock = 5
			fire = 2
			manuever = 4
			siege = 1
			trait = ruthless_personality
		}
	}
}

# Patricians wiped out
country_event = {
	id = castonath_patricians_events.69
	title = castonath_patricians_events.69.t
	desc = castonath_patricians_events.69.desc
	picture = VILLAGE_BURNING_eventPicture

	fire_only_once = yes

	major = yes
	major_trigger = {
		capital_scope = {
			OR = {
				region = inner_castanor_region
				region = south_castanor_region
				region = west_castanor_region
			}
		}
	}

	trigger = {
		has_country_modifier = monstrous_nation
		831 = {
			is_core = ROOT
			owned_by = ROOT
			NOT = {
				OR = {
					has_province_modifier = castonath_patrician_influence_full
					has_province_modifier = castonath_patrician_influence_significant
					has_province_modifier = castonath_patrician_influence_considerable
					has_province_modifier = castonath_patrician_influence_some
				}
			}
		}
		832 = {
			is_core = ROOT
			owned_by = ROOT
			NOT = {
				OR = {
					has_province_modifier = castonath_patrician_influence_full
					has_province_modifier = castonath_patrician_influence_significant
					has_province_modifier = castonath_patrician_influence_considerable
					has_province_modifier = castonath_patrician_influence_some
				}
			}
		}
		833 = {
			is_core = ROOT
			owned_by = ROOT
			NOT = {
				OR = {
					has_province_modifier = castonath_patrician_influence_full
					has_province_modifier = castonath_patrician_influence_significant
					has_province_modifier = castonath_patrician_influence_considerable
					has_province_modifier = castonath_patrician_influence_some
				}
			}
		}
	}

	mean_time_to_happen = {
		months = 1
	}

	# Nice
	option = {
		name = castonath_patricians_events.69.a
		set_global_flag = castonath_patricians_wiped_out
		add_stability_or_adm_power = yes
		add_treasury = 1000
		add_adm_power = 25
		add_dip_power = 25
		add_mil_power = 25
		add_prestige = 10
		831 = {
			add_province_modifier = {
				name = castonath_patricians_wiped
				duration = 3650
			}
		}
		832 = {
			add_province_modifier = {
				name = castonath_patricians_wiped
				duration = 3650
			}
		}
		833 = {
			add_province_modifier = {
				name = castonath_patricians_wiped
				duration = 3650
			}
		}
	}
}


# Extension of Castonath production monopoly
country_event = {
	id = castonath_patricians_events.100
	title = castonath_patricians_events.100.t
	desc = castonath_patricians_events.100.desc
	picture = TRADEGOODS_eventPicture

	is_triggered_only = yes

	immediate = {
		remove_estate_monopoly_modifier = { privilege = estate_castonath_patricians_castonath_monopoly }
	}
	
	option = {
		name = castonath_patricians_events.100.a
		reapply_estate_privilege = { privilege = estate_castonath_patricians_castonath_monopoly }
	}
	option = {
		name = castonath_patricians_events.100.b
		custom_tooltip = monopoly_privileges.14.b.tooltip
		hidden_effect = {
			every_owned_province = {
				limit = {
					OR = {
						province_id = 831
						province_id = 832
						province_id = 833
					}
				}
				apply_estate_monopoly_modifier = { privilege = estate_castonath_patricians_castonath_monopoly }
			}
		}
	}
}


# Estate Pulse Events # 
# Advancement
country_event = {
	id = castonath_patricians_events.101
	title = castonath_patricians_events.101.t
	desc = castonath_patricians_events.101.desc
	picture = BURGHER_ESTATE_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		has_estate = estate_castonath_patricians
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_castonath_patricians
				modifier = EST_VAL_CASTONATH_PATRICIANS_ADVANCE
			}
		}
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_castonath_patricians
				modifier = EST_VAL_CASTONATH_PATRICIANS_DECLINE
			}
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = castonath_patricians_events.1.a #Ok
		add_estate_influence_modifier = {
			estate = estate_castonath_patricians
			desc = EST_VAL_CASTONATH_PATRICIANS_ADVANCE
			influence = 10
			duration = 5475
		}
	}
}

# Decline
country_event = {
	id = castonath_patricians_events.102
	title = castonath_patricians_events.102.t
	desc = castonath_patricians_events.102.desc
	picture = BURGHER_ESTATE_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		has_estate = estate_castonath_patricians
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_castonath_patricians
				modifier = EST_VAL_CASTONATH_PATRICIANS_ADVANCE
			}
		}
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_castonath_patricians
				modifier = EST_VAL_CASTONATH_PATRICIANS_DECLINE
			}
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = castonath_patricians_events.102.a
		add_estate_influence_modifier = {
			estate = estate_castonath_patricians
			desc = EST_VAL_CASTONATH_PATRICIANS_DECLINE
			influence = -10
			duration = 5475
		}
	}
}

# Patricians vs landed nobles - rural vs urban investment
country_event = {
	id = castonath_patricians_events.103
	title = castonath_patricians_events.103.t
	desc = castonath_patricians_events.103.desc
	picture = GLOBAL_TRADE_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		has_estate = estate_castonath_patricians
		has_estate = estate_nobles
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_castonath_patricians
				modifier = EST_PATRICIANS_CITY_INVESTMENT
			}
		}
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_castonath_patricians
				modifier = EST_PATRICIANS_RURAL_INVESTMENT
			}
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		random_owned_province = {
			limit = {
				NOT = {
					area = castonath_area
				}
			}
			save_event_target_as = noble_owned_province
		}
	}
	
	# Our focus, as always, lies with Castonath
	option = {
		name = castonath_patricians_events.103.a
		add_prestige = 10
		add_estate_loyalty = {
			estate = estate_castonath_patricians
			loyalty = 15
		}
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = -15
		}
		add_estate_influence_modifier = {
			estate = estate_nobles
			desc = EST_PATRICIANS_CITY_INVESTMENT
			influence = -10
			duration = 5475
		}
		add_estate_influence_modifier = {
			estate = estate_castonath_patricians
			desc = EST_PATRICIANS_CITY_INVESTMENT
			influence = 10
			duration = 5475
		}
	}
	# The nobles are important to us too
	option = {
		name = castonath_patricians_events.103.b
		add_years_of_income = -0.5
		event_target:noble_owned_province = {
			random_list = {
				1 = {
					add_base_manpower = 1
				}
				1 = {
					add_base_production = 1
				}
				1 = {
					add_base_tax = 1
				}
			}
		}
		add_estate_loyalty = {
			estate = estate_castonath_patricians
			loyalty = -15
		}
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = 15
		}
		add_estate_influence_modifier = {
			estate = estate_nobles
			desc = EST_PATRICIANS_RURAL_INVESTMENT
			influence = 10
			duration = 5475
		}
		add_estate_influence_modifier = {
			estate = estate_castonath_patricians
			desc = EST_PATRICIANS_RURAL_INVESTMENT
			influence = -10
			duration = 5475
		}
	}
}

# Patricians demand focus on defending Castonath's walls
country_event = {
	id = castonath_patricians_events.104
	title = castonath_patricians_events.104.t
	desc = castonath_patricians_events.104.desc
	picture = FORT_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		has_estate = estate_castonath_patricians
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_castonath_patricians
				modifier = EST_VAL_CASTONATH_PATRICIANS_DEFENSIVE_FOCUS
			}
		}
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_castonath_patricians
				modifier = EST_VAL_CASTONATH_PATRICIANS_CASTONATH_VULNERABLE
			}
		}
	}
	
	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = 2
			is_at_war = yes
		}
		modifier = {
			factor = 2
			castonath_area = {
				type = all
				NOT = { has_fort_building_trigger = yes }
			}
		}
	}
	
	# Sure - funnel resources and our army over
	option = {
		name = castonath_patricians_events.104.a
		add_army_tradition = -10
		add_manpower = -3
		add_treasury = -300
		castonath_area = {
			add_province_modifier = {
				name = castonath_patricians_increased_defensive_investment
				duration = 5475
			}
		}
		add_estate_loyalty = {
			estate = estate_castonath_patricians
			loyalty = 15
		}
		add_estate_influence_modifier = {
			estate = estate_castonath_patricians
			desc = EST_VAL_CASTONATH_PATRICIANS_DEFENSIVE_FOCUS
			influence = 10
			duration = 5475
		}
	}
	# No - our army is needed elsewhere
	option = {
		name = castonath_patricians_events.104.b
		add_estate_loyalty = {
			estate = estate_castonath_patricians
			loyalty = -15
		}
		add_estate_influence_modifier = {
			estate = estate_castonath_patricians
			desc = EST_VAL_CASTONATH_PATRICIANS_CASTONATH_VULNERABLE
			influence = -10
			duration = 5475
		}
	}
}

# Grant loyal patrician a major office
country_event = {
	id = castonath_patricians_events.105
	title = castonath_patricians_events.105.t
	desc = castonath_patricians_events.105.desc
	picture = ADVISOR_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		has_estate = estate_castonath_patricians
		has_regency = no
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_castonath_patricians
				modifier = EST_VAL_CASTONATH_PATRICIANS_MINOR_TITLE_GRANTED
			}
		}
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_castonath_patricians
				modifier = EST_VAL_CASTONATH_PATRICIANS_MAJOR_TITLE_GRANTED
			}
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		hidden_effect = {
			random_list = {
				1 = {
					set_saved_name = {
						key = patrician_advisor
						type = advisor
						scope = ROOT
						female = yes
					}
				}
				1 = {
					set_saved_name = {
						key = patrician_advisor
						type = advisor
						scope = ROOT
						female = no
					}
				}
			}
		}
	}
	
	# Give a major title
	option = {
		name = castonath_patricians_events.105.a
		ai_chance = {
			factor = 1
		}
		add_estate_influence_modifier = {
			estate = estate_castonath_patricians
			desc = EST_VAL_CASTONATH_PATRICIANS_MAJOR_TITLE_GRANTED
			influence = 20
			duration = 7300
		}
		add_country_modifier = {
			name = patrician_control_of_monetary_affairs
			duration = 7300
		}
	}
	# Give a minor title
	option = {
		name = castonath_patricians_events.105.b
		ai_chance = {
			factor = 1
			modifier = {
				factor = 1.5
				estate_influence = {
					estate = estate_castonath_patricians
					influence = 80
				}
			}
		}
		add_estate_loyalty = {
			estate = estate_castonath_patricians
			loyalty = -10
		}
		add_estate_influence_modifier = {
			estate = estate_castonath_patricians
			desc = EST_VAL_CASTONATH_PATRICIANS_MINOR_TITLE_GRANTED
			influence = -10
			duration = 7300
		}
	}
}

# Patricians vs Magi - some academy denies patrician student
country_event = {
	id = castonath_patricians_events.106
	title = castonath_patricians_events.106.t
	desc = castonath_patricians_events.106.desc
	picture = UNIVERSITY_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		has_estate = estate_castonath_patricians
		has_estate = estate_mages
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_castonath_patricians
				modifier = EST_PATRICIAN_NO_ADMITTANCE_INTERVENTION
			}
		}
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_castonath_patricians
				modifier = EST_PATRICIAN_ADMITTANCE_INTERVENTION
			}
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	# Take side of patricians - they grease the deal with a lil cash
	option = {
		name = castonath_patricians_events.106.a
		add_corruption = 0.5
		add_years_of_income = 0.5
		add_estate_loyalty = {
			estate = estate_castonath_patricians
			loyalty = 15
		}
		add_estate_loyalty = {
			estate = estate_mages
			loyalty = -15
		}
		add_estate_influence_modifier = {
			estate = estate_mages
			desc = EST_PATRICIAN_ADMITTANCE_INTERVENTION
			influence = -10
			duration = 5475
		}
		add_estate_influence_modifier = {
			estate = estate_castonath_patricians
			desc = EST_PATRICIAN_ADMITTANCE_INTERVENTION
			influence = 10
			duration = 5475
		}
	}
	# Take side of magi - we need our magi to be strong and skilled
	option = {
		name = castonath_patricians_events.106.b
		add_corruption = -0.5
		add_adm_power = 15
		add_mil_power = 15
		add_dip_power = 15
		add_estate_loyalty = {
			estate = estate_castonath_patricians
			loyalty = -15
		}
		add_estate_loyalty = {
			estate = estate_mages
			loyalty = 15
		}
		add_estate_influence_modifier = {
			estate = estate_mages
			desc = EST_PATRICIAN_NO_ADMITTANCE_INTERVENTION
			influence = 10
			duration = 5475
		}
		add_estate_influence_modifier = {
			estate = estate_castonath_patricians
			desc = EST_PATRICIAN_NO_ADMITTANCE_INTERVENTION
			influence = -10
			duration = 5475
		}
	}
}

# Patricians vs Artificers - industrialization/transformation of the Castonath cityscape
country_event = {
	id = castonath_patricians_events.107
	title = castonath_patricians_events.107.t
	desc = castonath_patricians_events.107.desc
	picture = CITY_VIEW_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		has_estate = estate_castonath_patricians
		has_estate = estate_artificers
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_castonath_patricians
				modifier = EST_VAL_PATRICIANS_SUPPORTED_CHANGING_CITYSCAPE
			}
		}
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_castonath_patricians
				modifier = EST_VAL_ARTIFICERS_SUPPORTED_CHANGING_CITYSCAPE
			}
		}
	}

	immediate = {
		random_owned_province = {
			limit = { area = castonath_area }
			save_event_target_as = changing_cityscape_province
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}

	# Preserve Castonath
	option = { 
		name = castonath_patricians_events.107.a
		event_target:changing_cityscape_province = {
			add_base_tax = 1
		}
		add_estate_loyalty = {
			estate = estate_castonath_patricians
			loyalty = 15
		}
		add_estate_loyalty = {
			estate = estate_artificers
			loyalty = -15
		}
		add_estate_influence_modifier = {
			estate = estate_artificers
			desc = EST_VAL_PATRICIANS_SUPPORTED_CHANGING_CITYSCAPE
			influence = -10
			duration = 5475
		}
		add_estate_influence_modifier = {
			estate = estate_castonath_patricians
			desc = EST_VAL_PATRICIANS_SUPPORTED_CHANGING_CITYSCAPE
			influence = 10
			duration = 5475
		}
	}

	# Industrialization is the future
	option = { 
		name = castonath_patricians_events.107.b
		event_target:changing_cityscape_province = {
			add_base_production = 1
		}
		add_estate_loyalty = {
			estate = estate_artificers
			loyalty = 15
		}
		add_estate_loyalty = {
			estate = estate_castonath_patricians
			loyalty = -15
		}
		add_estate_influence_modifier = {
			estate = estate_castonath_patricians
			desc = EST_VAL_ARTIFICERS_SUPPORTED_CHANGING_CITYSCAPE
			influence = -10
			duration = 5475
		}
		add_estate_influence_modifier = {
			estate = estate_artificers
			desc = EST_VAL_ARTIFICERS_SUPPORTED_CHANGING_CITYSCAPE
			influence = 10
			duration = 5475
		}
	}
}

# The shitfall - Lower Castonath event
country_event = {
	id = castonath_patricians_events.108
	title = castonath_patricians_events.108.t
	desc = castonath_patricians_events.108.desc
	picture = PLAGUE_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		has_estate = estate_castonath_patricians
		castonath_area = {
			type = all
			owned_by = ROOT
		}
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_castonath_patricians
				modifier = EST_VAL_CASTONATH_SHITFALL
			}
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	# Not my problem
	option = {
		name = castonath_patricians_events.108.a
		add_corruption = 1
		832 = { # Lower Castonath
			add_unrest = 3
		}
	}

	# Tell the patricians to stop dumping so much shit down the shitfall
	option = {
		name = castonath_patricians_events.108.b
		add_estate_loyalty = {
			estate = estate_castonath_patricians
			loyalty = -15
		}
		add_estate_influence_modifier = {
			estate = estate_castonath_patricians
			desc = EST_VAL_CASTONATH_SHITFALL
			influence = -10
			duration = 5475
		}
		832 = {
			add_province_modifier = {
				name = castonath_patricians_less_shit_down_shitfall_healthier_pop
				duration = 5475
			}
		}
	}
}

# Maybe an event directly related to something unique about North Castonath

# Maybe an event directly related to something unique about South Castonath

# Patricians who have fled move back in
country_event = {
	id = castonath_patricians_events.109
	title = castonath_patricians_events.109.t
	desc = castonath_patricians_events.109.desc
	picture = CARAVAN_EVENT_Picture
	
	is_triggered_only = yes
	
	trigger = {
		has_estate = estate_castonath_patricians
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_castonath_patricians
				modifier = EST_VAL_CASTONATH_PATRICIANS_ADVANCE
			}
		}
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_castonath_patricians
				modifier = EST_VAL_CASTONATH_PATRICIANS_DECLINE
			}
		}
		any_known_country = {
			capital_scope = {
				OR = {
					continent = africa
					continent = europe
				}
			}
			OR = {
				culture_group = divenori
				culture_group = businori
				culture_group = bulwari
			}
		}
	}
	
	immediate = {
		random_owned_province = {
			limit = { area = castonath_area }
			save_event_target_as = returning_patricians_province
		}
		random_known_country = {
			limit = {
				OR = {
					culture_group = divenori
					culture_group = businori
					culture_group = bulwari
				}
			}
			save_event_target_as = return_patricians_from_country
		}
	}

	mean_time_to_happen = {
		days = 1
	}
	
	# Sure
	option = {
		name = castonath_patricians_events.109.a
		event_target:returning_patricians_province = {
			add_base_tax = 1
		}
		add_estate_loyalty = {
			estate = estate_castonath_patricians
			loyalty = 15
		}
		add_estate_influence_modifier = {
			estate = estate_castonath_patricians
			desc = EST_VAL_LET_PATRICIANS_IN
			influence = 10
			duration = 5475
		}
		event_target:return_patricians_from_country = {
			add_opinion = {
				who = ROOT
				modifier = estate_castanor_patricians_accepted
			}
		}
	}
	# For a price, yes
	option = {
		name = castonath_patricians_events.109.b
		add_years_of_income = 0.2
		add_estate_loyalty = {
			estate = estate_castonath_patricians
			loyalty = 5
		}
		add_estate_influence_modifier = {
			estate = estate_castonath_patricians
			desc = EST_VAL_LET_PATRICIANS_IN
			influence = 10
			duration = 5475
		}
		event_target:return_patricians_from_country = {
			add_opinion = {
				who = ROOT
				modifier = estate_castanor_patricians_accepted
			}
		}
	}
	# Make them return from where they came from
	option = {
		name = castonath_patricians_events.109.c
		add_estate_loyalty = {
			estate = estate_castonath_patricians
			loyalty = -5
		}
		add_estate_influence_modifier = {
			estate = estate_castonath_patricians
			desc = EST_VAL_BARRED_PATRICIANS
			influence = -10
			duration = 5475
		}
		event_target:return_patricians_from_country = {
			add_opinion = {
				who = ROOT
				modifier = estate_castanor_patricians_turned_away
			}
			add_trust = {
				who = ROOT
				value = 5
			}
		}
	}
}

# Patricians complain about monstrous minorities in the city
country_event = {
	id = castonath_patricians_events.110
	title = castonath_patricians_events.110.t
	desc = castonath_patricians_events.110.desc
	picture = MERCHANTS_TALKING_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		has_estate = estate_castonath_patricians
		NOT = { culture_group = orcish }
		NOT = { culture_is_half_orcish = yes }
		NOT = { culture_group = goblin }
		any_owned_province = {
			OR = {
				province_id = 831
				province_id = 832
				province_id = 833
			}
			has_any_orcish_pop_trigger = yes
			has_any_half_orcish_pop_trigger = yes
			has_any_goblin_pop_trigger = yes
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	# They have a point
	option = {
		name = castonath_patricians_events.110.a
		add_estate_loyalty = {
			estate = estate_castonath_patricians
			loyalty = 15
		}
		add_estate_influence_modifier = {
			estate = estate_castonath_patricians
			desc = EST_VAL_PATRICIANS_OVER_MONSTERS
			influence = 10
			duration = 5475
		}
		if = {
			limit = {
				castonath_area = {
					has_any_orcish_pop_trigger = yes
				}
			}
			small_decrease_of_orcish_tolerance_effect = yes
		}
		if = {
			limit = { 
				castonath_area = {
					has_any_half_orcish_pop_trigger = yes
				}
			}
			small_decrease_of_half_orcish_tolerance_effect = yes
		}
		if = {
			limit = {
				castonath_area = {
					has_any_goblin_pop_trigger = yes
				}
			}
			small_decrease_of_goblin_tolerance_effect = yes
		}
	}
	# They'll have to learn to live with them
	option = {
		name = castonath_patricians_events.110.b
		add_estate_loyalty = {
			estate = estate_castonath_patricians
			loyalty = -15
		}
		add_estate_influence_modifier = {
			estate = estate_castonath_patricians
			desc = EST_VAL_MONSTERS_OVER_PATRICIANS
			influence = -10
			duration = 5475
		}
		if = {
			limit = {
				castonath_area = {
					has_any_orcish_pop_trigger = yes
				}
			}
			small_increase_of_orcish_tolerance_effect = yes
		}
		if = {
			limit = { 
				castonath_area = {
					has_any_half_orcish_pop_trigger = yes
				}
			}
			small_increase_of_half_orcish_tolerance_effect = yes
		}
		if = {
			limit = {
				castonath_area = {
					has_any_goblin_pop_trigger = yes
				}
			}
			small_increase_of_goblin_tolerance_effect = yes
		}
	}
}

# High influence high loyalty - patrician investment
country_event = {
	id = castonath_patricians_events.111
	title = castonath_patricians_events.111.t
	desc = castonath_patricians_events.111.desc
	picture = BURGHER_ESTATE_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		has_estate = estate_castonath_patricians
		estate_loyalty = {
			estate = estate_castonath_patricians
			loyalty = 60
		}
		estate_influence = {
			estate = estate_castonath_patricians
			influence = 60
		}
		NOT = {
			has_country_modifier = jain_administration
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	# Nice
	option = {
		name = castonath_patricians_events.111.a
		add_estate_influence_modifier = {
			estate = estate_castonath_patricians
			desc = EST_VAL_PATRICIAN_INVESTMENTS
			influence = 10
			duration = 5475
		}
		add_stability_or_adm_power = yes
		add_years_of_income = 0.5
		add_country_modifier = {
			name = castonath_patricians_investment
			duration = 7300
		}
	}
}

# Low loyalty - patricians revolt
country_event = {
	id = castonath_patricians_events.112
	title = castonath_patricians_events.112.t
	desc = castonath_patricians_events.112.desc
	picture = BURGHER_ESTATE_UPSET_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		has_estate = estate_castonath_patricians
		NOT = {
			estate_loyalty = {
				estate = estate_castonath_patricians
				loyalty = 30
			}
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	# They must be joking!
	option = {
		name = castonath_patricians_events.112.a
		castonath_area = {
			limit = { owned_by = ROOT }
			spawn_rebels = {
				type = particularist_rebels
				size = 1
			}
		}
	}
	# Give them more autonomy
	option = {
		name = castonath_patricians_events.112.b
		castonath_area = {
			limit = { owned_by = ROOT }
			add_local_autonomy = 33
		}
	}
}

# High influence - centralizing power in Castonath
country_event = {
	id = castonath_patricians_events.113
	title = castonath_patricians_events.113.t
	desc = castonath_patricians_events.113.desc
	picture = indiangfx_CITY_DEVELOPMENT_eventPicture
	
	trigger = {
		has_estate = estate_castonath_patricians
		estate_influence = {
			estate = estate_castonath_patricians
			influence = 70
		}
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_castonath_patricians
				modifier = EST_VAL_PATRICIAN_DEMANDS_GIVEN_IN
			}
		}
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_castonath_patricians
				modifier = EST_VAL_PATRICIAN_DEMANDS_DENIED
			}
		}
		NOT= {
			has_country_modifier = castonath_patricians_give_demands_country
		}
	}
	
	is_triggered_only = yes
	
	
	mean_time_to_happen = {
		days = 1
	}
	
	# Sure
	option = {
		name = castonath_patricians_events.113.a
		add_years_of_income = -0.5
		castonath_area = {
			limit = { owned_by = ROOT }
			add_province_modifier = {
				name = castonath_patricians_give_demands_province
				duration = 5475
			}
		}
		add_country_modifier = {
			name = castonath_patricians_give_demands_country
			duration = 5475
		}
		add_estate_loyalty = {
			estate = estate_castonath_patricians
			loyalty = 15
		}
		add_estate_influence_modifier = {
			estate = estate_castonath_patricians
			influence = 10
			desc = EST_VAL_PATRICIAN_DEMANDS_GIVEN_IN
			duration = 5475
		}
	}

	# Nah dawg
	option = {
		name = castonath_patricians_events.113.b
		add_estate_loyalty = {
			estate = estate_castonath_patricians
			loyalty = -15
		}
		add_estate_influence_modifier = {
			estate = estate_castonath_patricians
			influence = -10
			desc = EST_VAL_PATRICIAN_DEMANDS_DENIED
			duration = 5475
		}
	}
}

# Risky investment fails
country_event = {
	id = castonath_patricians_events.114
	title = castonath_patricians_events.114.t
	desc = castonath_patricians_events.114.desc
	picture = BURGHER_ESTATE_eventPicture
	
	trigger = {
		has_estate = estate_castonath_patricians
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_castonath_patricians
				modifier = EST_VAL_COMPENSATING_LOSSES
			}
		}
		NOT = {
			has_estate_influence_modifier = {
				estate = estate_castonath_patricians
				modifier = EST_VAL_BAD_FORTUNES
			}
		}
	}
	
	is_triggered_only = yes
	
	
	mean_time_to_happen = {
		days = 1
	}
	
	# Compensate 'em
	option = {
		name = castonath_patricians_events.114.a
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.5
				NOT = {
					estate_loyalty = {
						estate = estate_castonath_patricians
						loyalty = 45
					}
				}
			}
			modifier = {
				factor = 0.5
				estate_influence = {
					estate = estate_castonath_patricians
					influence = 60
				}
			}
		}
		add_years_of_income = -0.5
		add_mercantilism = 1
		add_estate_loyalty = {
			estate = estate_castonath_patricians
			loyalty = 15
		}
		add_estate_influence_modifier = {
			estate = estate_castonath_patricians
			influence = 10
			desc = EST_VAL_COMPENSATING_LOSSES
			duration = 5475
		}
	}

	# Nah dog
	option = {
		name = castonath_patricians_events.114.b
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.5
				NOT = {
					estate_loyalty = {
						estate = estate_castonath_patricians
						loyalty = 45
					}
				}
			}
			modifier = {
				factor = 1.5
				estate_influence = {
					estate = estate_castonath_patricians
					influence = 60
				}
			}
		}
		add_estate_loyalty = {
			estate = estate_castonath_patricians
			loyalty = -15
		}
		add_estate_influence_modifier = {
			estate = estate_castonath_patricians
			influence = -10
			desc = EST_VAL_BAD_FORTUNES
			duration = 5475
		}
	}
}